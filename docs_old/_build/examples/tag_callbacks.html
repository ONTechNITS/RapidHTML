<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tag Callbacks &#8212; RapidHTML 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=c058f7c8" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=01f34227"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Hello World" href="hello_world.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tag-callbacks">
<h1>Tag Callbacks<a class="headerlink" href="#tag-callbacks" title="Link to this heading">¶</a></h1>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>Creating a route for each action you want to perform in your application can
quickly become cumbersome. To simplify this process, RapidHTML provides the
<cite>callback</cite> attribute on every tag that allows you to define a callback function
that will be called when the tag is interacted with. This callback function can
be used to perform any action that a standard route can perform, such as returning
a response or updating the page.</p>
<p>Here is an example that demonstrates how to use the <cite>callback</cite> attribute to define
a callback function for a button that updates the page with the current time when
clicked:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">rapidhtml</span> <span class="kn">import</span> <span class="n">RapidHTML</span>
<span class="kn">from</span> <span class="nn">rapidhtml.tags</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">RapidHTML</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">update_time</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">homepage</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Html</span><span class="p">(</span>
            <span class="n">Div</span><span class="p">(</span>
                <span class="n">H1</span><span class="p">(</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">),</span>
                <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Click me&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;button&quot;</span><span class="p">,</span>
                    <span class="n">callback</span><span class="o">=</span><span class="n">update_time</span><span class="p">,</span> <span class="n">hx_target</span><span class="o">=</span><span class="s2">&quot;#time&quot;</span><span class="p">),</span>
                <span class="n">P</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">serve</span><span class="p">()</span>
</pre></div>
</div>
<p>In this example, the <cite>update_time</cite> function is defined as an asynchronous function
that returns the current time in the format <cite>‘%H:%M:%S’</cite>. The <cite>Button</cite> element
is created with a <cite>callback</cite> attribute that is set to the <cite>update_time</cite> function.
When the button is clicked, the <cite>update_time</cite> function is called, and the <cite>#time</cite>
tag’s text is updated with the current time.</p>
<p>Behind the scenes, RapidHTML is using HTMX to send an AJAX request to the server
when the button is clicked, and the response from the server is used to update
the page. With that in mind, you can set any of the HTMX attributes on the button
element to customize the behaviour of the AJAX request.</p>
<p>By default, RapidHTML sets the <cite>hx-get</cite> attribute on the button element to the
route that the callback function is defined on.</p>
<p>You can read more about HTMX attributes in the
<a class="reference external" href="https://htmx.org/reference/">HTMX documentation</a>.</p>
</section>
<section id="the-rapidhtmlcallback-class">
<h2>The <cite>RapidHTMLCallback</cite> class<a class="headerlink" href="#the-rapidhtmlcallback-class" title="Link to this heading">¶</a></h2>
<p>To make it easier to define callback functions, and allow you to send any type of
request you’d like, RapidHTML provides the <cite>RapidHTMLCallback</cite> class. This class
helps to abstract away the details of HTMX and allows you to define a callback
function that can return any type of response.</p>
<p>Here is an example that demonstrates how to use the <cite>RapidHTMLCallback</cite> class to
define a callback function for a button that updates the page with the current time
when clicked:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">rapidhtml</span> <span class="kn">import</span> <span class="n">RapidHTML</span>
<span class="kn">from</span> <span class="nn">rapidhtml.tags</span> <span class="kn">import</span> <span class="o">*</span>

<span class="hll"><span class="kn">from</span> <span class="nn">rapidhtml.callbacks</span> <span class="kn">import</span> <span class="n">RapidHTMLCallback</span>
</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">RapidHTML</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">update_time</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">homepage</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>

<span class="hll">    <span class="n">time_callback</span> <span class="o">=</span> <span class="n">RapidHTMLCallback</span><span class="p">(</span>
</span><span class="hll">        <span class="n">func</span><span class="o">=</span><span class="n">update_time</span><span class="p">,</span>
</span><span class="hll">        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">target</span><span class="o">=</span><span class="s2">&quot;#time&quot;</span>
</span><span class="hll">    <span class="p">)</span>
</span>
    <span class="k">return</span> <span class="n">Html</span><span class="p">(</span>
            <span class="n">Div</span><span class="p">(</span>
                <span class="n">H1</span><span class="p">(</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">),</span>
<span class="hll">                <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Click me&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;button&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">time_callback</span><span class="p">),</span>
</span>                <span class="n">P</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">serve</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">RapidHTML</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hello_world.html">Hello World</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tag Callbacks</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../examples.html">Examples</a><ul>
      <li>Previous: <a href="hello_world.html" title="previous chapter">Hello World</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Thomas Ryan, Moses Cordeiro, Rashid N H M.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.0.2</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/examples/tag_callbacks.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>